<!-- Copyright (c) 2017, XJ Music Inc. (https://xj.io) All Rights Reserved. -->

<!-- Inner Content -->
{{outlet}}

<div class="form-horizontal container-fluid">

  <!-- List of Phases -->
  <div class="col-sm-12">
    <div class="table-list">
      <table class="table">
        <thead>
        <tr>
          <th width="1%">Offset</th>
          <th width="1%">Total</th>
          <th>Name</th>
          <th width="1%">Key</th>
          <th width="1%">Density</th>
          <th width="1%">Tempo</th>
          <th><!-- Actions --></th>
          <th width="1%">#</th>
        </tr>
        </thead>
        <tbody>
        {{#each model.phases as |phase|}}
          <tr class="item">
            <td>{{phase.offset}}</td>
            <td>{{phase.total}}</td>
            <td>{{#link-to 'accounts.one.libraries.one.patterns.one.phases.one' phase.pattern.library.account phase.pattern.library phase.pattern phase}}{{phase.name}}{{/link-to}}</td>
            <td>{{phase.key}}</td>
            <td>{{phase.density}}</td>
            <td>{{phase.tempo}}</td>
            <td>
              {{#link-to 'accounts.one.libraries.one.patterns.one.phases.one.memes' phase.pattern.library.account phase.pattern.library phase.pattern phase}}Memes{{/link-to}}<span>&nbsp;</span>
              {{#if (not-eq model.pattern.type "macro")}}
                {{#link-to 'accounts.one.libraries.one.patterns.one.phases.one.chords' phase.pattern.library.account phase.pattern.library phase.pattern phase}}Chords{{/link-to}}<span>&nbsp;</span>
                {{#link-to 'accounts.one.libraries.one.patterns.one.phases.one.voices' phase.pattern.library.account phase.pattern.library phase.pattern phase}}Voices{{/link-to}}<span>&nbsp;</span>
                {{entity-actions 'accounts.one.libraries.one.patterns.one.phases.one' 'edit|clone|destroy' phase.pattern.library.account phase.pattern.library phase.pattern phase}}
              {{/if}}
            </td>
            <th scope="row">{{#link-to "accounts.one.libraries.one.patterns.one.phases.one"
                                       phase.pattern.library.account phase.pattern.library phase.pattern phase}}{{phase.id}}{{/link-to}}</th>
          </tr>
        {{/each}}
        </tbody>
      </table>
    </div>
  </div>

  {{#if (or auth.isArtist auth.isAdmin)}}
    <div class="col-sm-12">
      Or: {{#link-to 'accounts.one.libraries.one.patterns.one.phases.new' model.pattern.library.account model.pattern.library model.pattern}}Create New Phase{{/link-to}}
    </div>
  {{/if}}
</div>
