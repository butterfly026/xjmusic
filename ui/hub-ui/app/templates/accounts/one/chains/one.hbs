<!-- Copyright (c) 2018, XJ Music Inc. (https://xj.io) All Rights Reserved. -->

<div class="headline container-fluid">
  <div class="row">
    <div class="col-sm-12">

      <!-- Entity type and ID -->
      <div class="entity">
        Chain
        #{{model.id}}
        <div class="badge {{lowercase model.state}}-state">{{model.state}}</div>
      </div>

      <!-- Title -->
      <h1>
        {{model.name}}
        <!-- should only show following edit icon if user has privileges to edit this chain -->
        <small>
          {{entity-actions "accounts.one.chains.one" "edit|destroy" model.account model}}
        </small>
        &lpar;{{model.state}}&rpar;
      </h1>

      <!-- Time -->
      <p class="detail time">
        from <strong>{{model.startAt}}</strong>
        {{#if model.stopAt}}
          to <strong>{{model.stopAt}}</strong>
        {{/if}}
      </p>

    </div>
  </div>
</div>


<!-- Row -->
<div class="form-horizontal container-fluid">
  <div class="form-group row">

    <!-- State Change -->
    <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
      <div class="chain-state-change container-fluid {{lowercase model.state}}-state">
        <table>
          <tbody>
          <tr class="row">
            <th class="align-middle">
              {{capitalize model.state}}
            </th>
            <td>
              {{chain-state-change model}}
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Play Chain -->
    {{#if (or (eq model.state "Fabricate") (eq model.state "Complete"))}}
      <div class="col-sm-12 col-md-6 col-lg-4 col-xl-3">
        <div class="{{if (eq player.currentChain.id model.id)
                         'now-playing'}} play-chain container-fluid">
          <table>
            <tbody>
            <tr class="row">
              <th class="align-middle">
                {{#if (eq player.currentChain.id model.id)}}
                  {{player.state}}
                {{else}}
                  Play
                {{/if}}
              </th>
              <td>
                <button type="button" aria-label="play chain #{{model.id}}"
                        class="btn btn-success link-play" {{action 'play' model}}>
                  &#9658;
                </button>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    {{/if}}

  </div>
</div>

<!-- Upper Container -->
<div class="form-horizontal container-fluid">

  <!-- Links to actions -->
  <div class="form-group row">
    <ul class="nav nav-tabs">
      <li class="nav-item">
        {{#link-to 'accounts.one.chains.one.links' model class='nav-link' class='nav-link'}}Links{{/link-to}}
      </li>
      <li class="nav-item">
        &nbsp;
      </li>
      <li class="nav-item">
        {{#link-to 'accounts.one.chains.one.configs' model class='nav-link' class='nav-link'}}Configs{{/link-to}}
      </li>
      <li class="nav-item">
        {{#link-to 'accounts.one.chains.one.libraries' model class='nav-link' class='nav-link'}}Libraries{{/link-to}}
      </li>
      <li class="nav-item">
        {{#link-to 'accounts.one.chains.one.instruments' model class='nav-link' class='nav-link'}}Instruments{{/link-to}}
      </li>
      <li class="nav-item">
        {{#link-to 'accounts.one.chains.one.patterns' model class='nav-link' class='nav-link'}}Patterns{{/link-to}}
      </li>
    </ul>
  </div>

</div>

<!-- Inner Content -->
{{outlet}}