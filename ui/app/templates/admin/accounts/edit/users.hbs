<!-- Copyright (c) 2017, Outright Mental Inc. (http://outright.io) All Rights Reserved. -->

<!-- Only show list of account users if non-empty -->
{{#if model.accountUsers.length}}

  <!-- Horizontal Rule -->
  <div class="col-sm-12">
    <hr/>
  </div>

  <!-- List of Users in this Account -->
  <div class="form-horizontal">
    <div class="col-sm-offset-2 sm-col-12">
      <h4>Users in Account #{{model.account.id}}</h4>
      {{yield}}
    </div>

    <div class="col-sm-offset-2 sm-col-12">
      <div class="table-list">
        <table class="table">
          <thead>
          <tr>
            <th>#</th>
            <th>User ID</th>
            <th width="50">Pic</th>
            <th>User Name</th>
            <th>Action</th>
          </tr>
          </thead>
          <tbody>
          {{#each model.accountUsers as |accountUser|}}
            <tr>
              <th scope="row">{{accountUser.id}}</th>
              <td>{{accountUser.user.id}}</td>
              <td><img class="avatar" src="{{accountUser.user.avatarUrl}}"/></td>
              <td>{{accountUser.user.name}}</td>
              <td>
                <button {{action "destroyAccountUser" accountUser}}>Remove</button>
              </td>
            </tr>
          {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{{/if}}

<!-- Horizontal Rule -->
<div class="col-sm-12">
  <hr/>
</div>

<!-- Add a User to this Account -->
<div class="form-horizontal">
  <div class="col-sm-offset-2 sm-col-12">
    <h4>Add User to Account</h4>
  </div>
  <div class="form-group">
    <label class="col-sm-2 control-label">Select User</label>
    <div class="col-sm-10">
      <!--input type="text" value=model.newAccountUser.userId class="form-control" autofocus="autofocus"-->
      <!--placeholder="User ID to grant access"}}-->
      {{#power-select
        placeholder="Select User"
        options=model.users
        selected=model.userToAdd
        onchange=(action "setUserToAdd")
      as |user| }}
        <img src="{{user.avatarUrl}}"/> {{user.name}} (#{{user.id}})
      {{/power-select}}
    </div>
  </div>
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-default" {{action 'addUserToAccount' model}}>Add User to
        Account
      </button>
    </div>
  </div>
</div>

