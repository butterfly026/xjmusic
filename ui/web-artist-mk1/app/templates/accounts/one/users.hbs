<!-- Copyright (c) 2020, XJ Music Inc. (https://xj.io) All Rights Reserved. -->

<!-- Inner Content -->
{{outlet}}


<!-- Only show list of records if non-empty -->
{{#if model.accountUsers.length}}
  <div class="table-list">
    <table class="table">
      <thead>
      <tr>
        <th>#</th>
        <th width="50">Pic</th>
        <th>Name</th>
        {{#if auth.isAdmin}}
          <th>Action</th>{{/if}}
      </tr>
      </thead>
      <tbody>
      {{#each model.accountUsers as |accountUser|}}
        <tr>
          <th scope="row">{{accountUser.user.id}}</th>
          <td>{{#link-to "users.one" accountUser.user}}
            <img class="avatar" src="{{accountUser.user.avatarUrl}}"/>{{/link-to}}</td>
          <td>{{#link-to "users.one" accountUser.user}}{{accountUser.user.name}}{{/link-to}}</td>
          {{#if auth.isAdmin}}
            <td>
              <button {{action "destroyAccountUser" accountUser}}>Remove</button>
            </td>{{/if}}
        </tr>
      {{/each}}
      </tbody>
    </table>
  </div>
{{else}}
  <div class="form-horizontal container-fluid">
    <div class="col-sm-12">
      <p>No Users are bound to this Account.</p>
    </div>
  </div>
{{/if}}

{{#if auth.isAdmin}}
  <!-- Add a User to this Account -->
  <div class="form-group row">
    <label class="col-sm-2 control-label">Select User to add</label>
    <div class="col-sm-10">
      <!--input type="text" value=model.newAccountUser.userId class="form-control" autofocus="autofocus"-->
      <!--placeholder="User ID to grant access"}}-->
      {{#power-select
        placeholder="Select User"
        options=model.users
        selected=model.userToAdd
        searchField='name'
        onChange=(action "setUserToAdd")
      as |user| }}
        <img src="{{user.avatarUrl}}"/> {{user.name}} (#{{user.id}})
      {{/power-select}}
    </div>
  </div>
  <div class="form-group row">
    <div class="offset-sm-2 col-sm-10">
      <button type="submit" class="btn btn-primary" {{action 'addUserToAccount' model}}>Add User to
        Account
      </button>
    </div>
  </div>
{{/if}}
